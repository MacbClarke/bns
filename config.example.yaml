listen:
  addr: "0.0.0.0:53"
  udp: true
  tcp: true

admin:
  addr: "0.0.0.0:8080"
  # If set, /api requires `Authorization: Bearer <token>`
  token: "change-me"

storage:
  path: "./data/bns.sqlite"
  retention_days: 7

upstreams:
  - "223.5.5.5:53"
  - "1.1.1.1:53"
  # IPv6 upstream example:
  # - "[2606:4700:4700::1111]:53"
upstream_policy: "failover" # failover | round_robin | random
timeout_ms: 2000

cache:
  max_entries: 200000
  min_ttl: 5
  max_ttl: 86400
  negative_ttl: 60
  # If enabled, when cache is expired but within `stale_max_age`,
  # serve a stale response immediately and refresh in background.
  stale_while_revalidate: false
  stale_max_age: 60
  # Optional: adaptive stale window based on query frequency (hot keys get more stale).
  # Only takes effect when `stale_while_revalidate: true`.
  #
  # stale_min_age: minimum stale window for cold keys (seconds). Higher => less upstream traffic,
  #                but stale answers may be served for longer.
  # stale_half_life_secs: hotness decay half-life (seconds). Smaller => "hot" cools faster and
  #                       stale shrinks quickly; larger => past traffic keeps keys hot longer.
  # stale_hotness_k: curve parameter controlling how fast stale grows with hotness. Roughly:
  #                  when hotness ~= k, stale is ~halfway between `stale_min_age` and `stale_max_age`.
  #                  Smaller k => fewer hits needed to get a large stale window; larger k => slower growth.
  # stale_min_age: 0
  # stale_half_life_secs: 300
  # stale_hotness_k: 10

# Optional: inserted into DB only if DB has no rules.
bootstrap_rules:
  - match_kind: "exact"
    name: "example.com."
    rr_type: "A"
    value: "10.0.0.10"
    ttl: 60
    priority: 100
    enabled: true
